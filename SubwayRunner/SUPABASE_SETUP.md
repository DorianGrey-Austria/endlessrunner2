# üöÄ Supabase Setup f√ºr Subway Runner 3D

## üìã Schritt-f√ºr-Schritt Anleitung

### 1. Supabase Account erstellen
1. Gehe zu [supabase.com](https://supabase.com)
2. Erstelle einen kostenlosen Account
3. Erstelle ein neues Projekt: "subway-runner-3d"

### 2. Datenbank-Tabelle erstellen

Gehe zum SQL Editor in deinem Supabase Dashboard und f√ºhre diesen SQL-Code aus:

```sql
-- Erstelle die Highscore-Tabelle
CREATE TABLE public.subway_runner_scores (
    id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    player_name character varying(50) NOT NULL,
    score integer NOT NULL DEFAULT 0,
    survival_time integer NOT NULL DEFAULT 0,
    is_victory boolean NOT NULL DEFAULT false,
    created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,
    CONSTRAINT subway_runner_scores_pkey PRIMARY KEY (id)
);

-- Aktiviere Row Level Security (RLS)
ALTER TABLE public.subway_runner_scores ENABLE ROW LEVEL SECURITY;

-- Erlaube √∂ffentliches Lesen aller Scores
CREATE POLICY "Allow public read access" ON public.subway_runner_scores
    FOR SELECT USING (true);

-- Erlaube √∂ffentliches Einf√ºgen neuer Scores
CREATE POLICY "Allow public insert access" ON public.subway_runner_scores
    FOR INSERT WITH CHECK (true);

-- Erstelle Index f√ºr bessere Performance
CREATE INDEX idx_subway_runner_scores_score ON public.subway_runner_scores(score DESC);
CREATE INDEX idx_subway_runner_scores_created_at ON public.subway_runner_scores(created_at DESC);
```

### 3. API-Schl√ºssel abrufen

1. Gehe zu Settings ‚Üí API in deinem Supabase Dashboard
2. Kopiere die folgenden Werte:
   - **Project URL** (z.B. `https://abcdefgh.supabase.co`)
   - **Anon Public Key** (der "anon" key)

### 4. Spiel konfigurieren

√ñffne `simple-game.html` und ersetze die Platzhalter:

```javascript
// Ersetze diese Zeilen:
const SUPABASE_URL = 'https://xyzcompany.supabase.co' // Deine Project URL hier
const SUPABASE_ANON_KEY = 'your-anon-key-here' // Dein anon key hier
```

**Beispiel:**
```javascript
const SUPABASE_URL = 'https://abcdefgh.supabase.co'
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
```

### 5. Testen

1. √ñffne das Spiel im Browser
2. Spiele eine Runde
3. Nach dem Spiel sollte (bei einem guten Score) der Name-Input erscheinen
4. Gib einen Namen ein und speichere
5. Die Bestenliste rechts sollte sich aktualisieren

## üõ°Ô∏è Sicherheit

- Die Tabelle ist √∂ffentlich lesbar und beschreibbar
- RLS (Row Level Security) ist aktiviert
- Nur das Lesen und Einf√ºgen ist erlaubt (kein Update/Delete)
- Perfekt f√ºr ein √∂ffentliches Spiel

## üìä Datenstruktur

Die Tabelle speichert:
- **player_name**: Spielername (max. 50 Zeichen)
- **score**: Erreichte Punkte
- **survival_time**: √úberlebte Zeit in Sekunden
- **is_victory**: Hat der Spieler die 60 Sekunden geschafft?
- **created_at**: Zeitstempel

## üîß Offline-Modus

Falls Supabase nicht verf√ºgbar ist, funktioniert das Spiel trotzdem:
- Scores werden lokal im Browser gespeichert (localStorage)
- Top 10 wird lokal verwaltet
- Beim n√§chsten Besuch sind die lokalen Scores noch da

## üéÆ Features

- **Top 10 Bestenliste** live aktualisiert
- **Globale Rangliste** aller Spieler weltweit
- **Victory-Troph√§en** üèÜ f√ºr 60-Sekunden-√úberlebende
- **Automatische Highscore-Erkennung**
- **Graceful Degradation** bei Verbindungsproblemen

Viel Spa√ü beim Spielen! üöáüéÆ